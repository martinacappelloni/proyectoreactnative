{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { auth, db, storage } from \"../firebase/config\";\n\nvar MyCamera = function (_Component) {\n  _inherits(MyCamera, _Component);\n\n  var _super = _createSuper(MyCamera);\n\n  function MyCamera(props) {\n    var _this;\n\n    _classCallCheck(this, MyCamera);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      permission: false,\n      photo: '',\n      showCamera: true\n    };\n    _this.camera;\n    return _this;\n  }\n\n  _createClass(MyCamera, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Camera.requestCameraPermissionsAsync().then(function () {\n        _this2.setState({\n          permission: true\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"takePicture\",\n    value: function takePicture() {\n      var _this3 = this;\n\n      this.camera.takePictureAsync().then(function (photo) {\n        _this3.setState({\n          photo: photo.uri,\n          showCamera: false\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"savePhoto\",\n    value: function savePhoto() {\n      var _this4 = this;\n\n      fetch(this.state.photo).then(function (res) {\n        return res.blob();\n      }).then(function (image) {\n        var ref = storage.ref(\"photos/\" + Date.now() + \".jpg\");\n        ref.put(image).then(function () {\n          ref.getDownloadURL().then(function (url) {\n            _this4.props.onImageUpload(url);\n\n            _this4.setState({\n              photo: ''\n            });\n          }).catch(function (error) {\n            return console.log(error);\n          });\n        }).catch(function (error) {\n          return console.log(error);\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.setState({\n        photo: '',\n        showCamera: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(View, {\n        style: styles.container\n      }, this.state.permission ? this.state.showCamera === false ? React.createElement(React.Fragment, null, React.createElement(Image, {\n        style: styles.cameraBody,\n        source: {\n          uri: this.state.photo\n        }\n      }), React.createElement(View, null, React.createElement(TouchableOpacity, {\n        style: styles.camerabutton,\n        onPress: function onPress() {\n          return _this5.savePhoto();\n        }\n      }, React.createElement(Text, null, \" Aceptar \")), React.createElement(TouchableOpacity, {\n        style: styles.camerabutton,\n        onPress: function onPress() {\n          return _this5.clear();\n        }\n      }, React.createElement(Text, null, \" Rechazar \")))) : React.createElement(View, {\n        style: styles.container\n      }, React.createElement(Camera, {\n        style: styles.cameraBody,\n        type: Camera.Constants.Type.back,\n        ref: function ref(reference) {\n          return _this5.camera = reference;\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.camerabutton,\n        onPress: function onPress() {\n          return _this5.takePicture();\n        }\n      }, React.createElement(Text, null, \" Sacar Foto \"))) : React.createElement(Text, null, \"No tienes permisos para usar la c\\xE1mara\"));\n    }\n  }]);\n\n  return MyCamera;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  cameraBody: {\n    flex: 7\n  },\n  camerabutton: {\n    flex: 1,\n    justifyContent: 'center'\n  }\n});\nexport default MyCamera;","map":{"version":3,"sources":["/Users/morabaylac/Desktop/proyectoreactnative/src/components/MyCamera.js"],"names":["React","Component","Camera","auth","db","storage","MyCamera","props","state","permission","photo","showCamera","camera","requestCameraPermissionsAsync","then","setState","catch","error","console","log","takePictureAsync","uri","fetch","res","blob","image","ref","Date","now","put","getDownloadURL","url","onImageUpload","styles","container","cameraBody","camerabutton","savePhoto","clear","Constants","Type","back","reference","takePicture","StyleSheet","create","flex","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Text, View, TouchableOpacity, StyleSheet, Image} from 'react-native';\nimport {Camera} from 'expo-camera'\nimport { auth, db, storage } from '../firebase/config';\n\nclass MyCamera extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            permission: false, \n            photo: '', \n            showCamera: true,\n        }\n        this.camera \n    }\ncomponentDidMount(){\n    Camera.requestCameraPermissionsAsync()\n    .then(()=>{\n        this.setState({\n            permission: true,\n        })\n    })\n    .catch( error => console.log(error))\n}\n\ntakePicture(){\n    this.camera.takePictureAsync()\n    .then((photo)=>{\n        this.setState({\n            photo: photo.uri, \n            showCamera: false,\n        })\n    })\n    .catch( error => console.log(error))\n\n}\nsavePhoto(){\n    fetch(this.state.photo)\n    .then(res => res.blob()) \n    .then( image =>{\n        const ref = storage.ref(`photos/${Date.now()}.jpg`)\n        ref.put(image) \n            .then(()=>{\n                ref.getDownloadURL() \n                    .then(url =>{\n                        this.props.onImageUpload(url);\n                        this.setState({\n                            photo: '',\n                        })\n                    })\n                    .catch( error => console.log(error))\n            })\n            .catch( error => console.log(error))\n    })\n    .catch( error => console.log(error))\n}\n\nclear(){\n        this.setState({\n            photo: '',\n            showCamera: true, \n        })\n    }\n\nrender(){\n    return(\n        <View style={styles.container}>\n        {\n            this.state.permission ?\n        \n                this.state.showCamera === false ? \n            <React.Fragment>\n                <Image\n                style={styles.cameraBody}\n                source={{uri:this.state.photo}}\n                />\n                <View>\n                <TouchableOpacity style={styles.camerabutton} onPress={()=> this.savePhoto()}>\n                    <Text> Aceptar </Text> \n                </TouchableOpacity>\n                <TouchableOpacity style={styles.camerabutton} onPress={()=> this.clear()}>\n                    <Text> Rechazar </Text> \n                </TouchableOpacity>\n                </View>\n            </React.Fragment> :\n            \n            <View style={styles.container}>\n                <Camera \n                    style={styles.cameraBody}\n                    type={Camera.Constants.Type.back}\n                    ref={(reference)=> this.camera = reference} \n                />\n                <TouchableOpacity style={styles.camerabutton} onPress={()=> this.takePicture()}>\n                    <Text> Sacar Foto </Text> \n                </TouchableOpacity>\n            </View>\n            :\n            \n            <Text>No tienes permisos para usar la cámara</Text>\n        }\n        </View>\n    )\n}\n}\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1\n    },\n    cameraBody: {\n        flex: 7,\n   },\n   camerabutton: {\n    flex: 1,\n    justifyContent: 'center',\n    },   \n})\n\nexport default MyCamera;"]},"metadata":{},"sourceType":"module"}